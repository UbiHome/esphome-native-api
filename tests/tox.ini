[tox]
requires =
    tox<4
envlist = aioesphomeapi{430000,421000,411800,400201,390001,380201,370203,370106,370004,360001,350001,340201,340101,340000,330101,330000,320204,320100,320000,310100,310001,300200,300100,300001,291000}
skipsdist = True

[testenv]
runner = uv-venv-lock-runner
setenv = 
    CI = true
    PYTEST_TIMEOUT = 20
deps =
  aioesphomeapi430400: aioesphomeapi==43.4.0
  aioesphomeapi430000: aioesphomeapi==43.0.0
  aioesphomeapi421000: aioesphomeapi==42.10.0
  aioesphomeapi411800: aioesphomeapi==41.18.0
  aioesphomeapi400201: aioesphomeapi==40.2.1
  aioesphomeapi390001: aioesphomeapi==39.0.1
  aioesphomeapi380201: aioesphomeapi==38.2.1
  aioesphomeapi370203: aioesphomeapi==37.2.3
  aioesphomeapi370106: aioesphomeapi==37.1.6
  aioesphomeapi370004: aioesphomeapi==37.0.4
  aioesphomeapi360001: aioesphomeapi==36.0.1
  aioesphomeapi350001: aioesphomeapi==35.0.1
  aioesphomeapi340201: aioesphomeapi==34.2.1
  aioesphomeapi340101: aioesphomeapi==34.1.0
  aioesphomeapi340000: aioesphomeapi==34.0.0
  aioesphomeapi330101: aioesphomeapi==33.1.1
  aioesphomeapi330000: aioesphomeapi==33.0.0
  aioesphomeapi320204: aioesphomeapi==32.2.4
  aioesphomeapi320100: aioesphomeapi==32.1.0
  aioesphomeapi320000: aioesphomeapi==32.0.0
  aioesphomeapi310100: aioesphomeapi==31.1.0
  aioesphomeapi310001: aioesphomeapi==31.0.1
  aioesphomeapi300200: aioesphomeapi==30.2.0
  aioesphomeapi300100: aioesphomeapi==30.1.0
  aioesphomeapi300001: aioesphomeapi==30.0.1
  aioesphomeapi291000: aioesphomeapi==29.10.0
  pytest-asyncio (>=0.26.0,<0.27.0)
  pytest-timeout (>=2.3.1,<3.0.0)
  pytest
commands =
; pytest api/encrypted_server_test.py
  pytest {posargs: .}